import"../chunks/DsnmJJEf.js";import"../chunks/pDtgKXZk.js";import{w as be,o as ge,a as P,e as x}from"../chunks/B3Yr4pq7.js";import{ad as he,N as y,ae as we,B as ke,u as s,r as Me,af as Pe,p as xe,ag as ye,ah as $e,ai as Oe,a3 as Se,a as $,d as Ae,k as O,Y as ee,f as C,c as i,b as t,s as l,ac as J,t as R,ab as Ee,i as b,a2 as S}from"../chunks/D7JtEr4O.js";import{i as re}from"../chunks/BKURqBGS.js";import{e as Ne,u as d,b as Te,i as ze}from"../chunks/DoaI9ZX2.js";import{r as ae,s as te}from"../chunks/A4WjF5gX.js";import{i as Ce}from"../chunks/CH9_Thn8.js";import{a as qe,s as z,b as De}from"../chunks/B8zlTyjN.js";import{g as se}from"../chunks/BbHf168v.js";import{s as A,c as je}from"../chunks/CmkYJTsV.js";import{b as U}from"../chunks/DS9ZxsbQ.js";function oe(r,a,g=a){var m=new WeakSet;he(r,"input",async e=>{var o=e?r.defaultValue:r.value;if(o=W(r)?Y(o):o,g(o),y!==null&&m.add(y),await we(),o!==(o=a())){var v=r.selectionStart,p=r.selectionEnd;r.value=o??"",p!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(p,r.value.length))}}),(ke&&r.defaultValue!==r.value||s(a)==null&&r.value)&&(g(W(r)?Y(r.value):r.value),y!==null&&m.add(y)),Me(()=>{var e=a();if(r===document.activeElement){var o=Pe??y;if(m.has(o))return}W(r)&&e===Y(r.value)||r.type==="date"&&!e&&!r.value||e!==r.value&&(r.value=e??"")})}function W(r){var a=r.type;return a==="number"||a==="range"}function Y(r){return r===""?null:+r}const Fe=be([]),He="https://hebrews-coffee-website.onrender.com";async function Le(r){try{const a=await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw new Error("Failed to add order");const g=await a.json();Fe.update(m=>[...m,g])}catch(a){console.error("Error adding order:",a)}}var Ve=C("<option> </option>"),Be=C("<p>Please enter name, phone number and pickup time</p>"),Ie=C('<div class="confirm-window"><div class="confirm-details"><div><strong> </strong></div> <p><strong>Espresso:</strong> </p> <p><strong>Milk:</strong> </p> <p><strong>Flavor:</strong> </p></div> <div class="confirm-sidebar"><div class="customizer-select"><input id="name-input" type="text" required/> <span class="border-text">Enter Name:</span></div> <div class="customizer-select"><input id="phone-input" type="tel" required/> <span class="border-text">Enter Phone Number:</span></div> <div class="customizer-select"><select class="bg-none" required></select> <span class="drop-arrow"><img alt="Dropdown Arrow"/></span> <span class="border-text">Choose Pickup Time:</span></div> <!> <button class="bar-button">Place Order</button> <button class="bar-button">Edit Order</button></div></div>'),Je=C("<p>No order to confirm. Please go back and customize your drink.</p>");function tr(r,a){xe(a,!1);const[g,m]=qe(),e=()=>De(A,"$storedOrder",g),o=ee();let v=ee(!1),p=["9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM"];function ne(){const c=new Date;for(const u in p){const h=new Date,[w,E]=u.split(" "),[q,k]=w.split(":").map(Number);let N=q%12;if(E==="PM"&&(N+=12),h.setHours(N,k,0,0),h>c)return u}return p[p.length-1]}function ie(){if(!b(o)){O(v,!0);return}Le(e()),je(),se(`${U}/place-order/${e().drink}/confirm/order-confirmation`)}function le(){console.log(e().drink);const c=e().drink.toLowerCase().replace(/ /g,"-");se(`${U}/place-order/${c}`)}ge(()=>{z(A,s(e).time_slot=ne(),s(e))}),ye(()=>e(),()=>{O(o,e()&&(e().name??"").toString().trim().length>0&&(e().phone??"").toString().trim().length>0)}),$e(),Ce();var G=Oe(),ce=Se(G);{var de=c=>{var u=Ie(),h=i(u),w=i(h),E=i(w),q=i(E);t(E),t(w);var k=l(w,2),N=l(i(k));t(k);var D=l(k,2),ue=l(i(D));t(D);var K=l(D,2),me=l(i(K));t(K),t(h);var Q=l(h,2),j=i(Q),F=i(j);ae(F),J(2),t(j);var H=l(j,2),L=i(H);ae(L),J(2),t(H);var V=l(H,2),M=i(V);R(()=>{e(),Ee(()=>{b(v)})}),Ne(M,5,()=>p,ze,(n,f)=>{var _=Ve(),I=i(_,!0);t(_);var T={};R(()=>{P(I,b(f)),T!==(T=b(f))&&(_.value=(_.__value=b(f))??"")}),$(n,_)}),t(M);var X=l(M,2),pe=i(X);t(X),J(2),t(V);var Z=l(V,2);{var fe=n=>{var f=Be();$(n,f)};re(Z,n=>{b(v)&&n(fe)})}var B=l(Z,2),_e=l(B,2);t(Q),t(u),R((n,f,_,I,T)=>{P(q,`${n??""} ${f??""}`),P(N,` ${_??""}`),P(ue,` ${I??""}`),P(me,` ${T??""}`),te(pe,"src",`${U??""}/icons/simple_tailless_nav_arrow.svg`),te(B,"aria-disabled",!b(o))},[()=>(S(d),e(),s(()=>d(e().temperature))),()=>(S(d),e(),s(()=>d(e().drink))),()=>(S(d),e(),s(()=>d(e().espresso))),()=>(S(d),e(),s(()=>d(e().milk))),()=>(S(d),e(),s(()=>d(e().flavor)))]),oe(F,()=>e().name,n=>z(A,s(e).name=n,s(e))),x("input",F,()=>O(v,!1)),oe(L,()=>e().phone,n=>z(A,s(e).phone=n,s(e))),x("input",L,()=>O(v,!1)),Te(M,()=>e().time_slot,n=>z(A,s(e).time_slot=n,s(e))),x("input",M,()=>O(v,!1)),x("click",B,ie),x("click",_e,le),$(c,u)},ve=c=>{var u=Je();$(c,u)};re(ce,c=>{e()?c(de):c(ve,!1)})}$(r,G),Ae(),m()}export{tr as component};
