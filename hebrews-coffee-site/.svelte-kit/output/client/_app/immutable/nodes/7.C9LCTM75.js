import"../chunks/DsnmJJEf.js";import"../chunks/0z1sJvhk.js";import{w as _e,o as be,a as P,e as x}from"../chunks/mZYaVlXh.js";import{ad as ge,I as y,ae as he,x as we,u as s,r as ke,af as Me,p as Pe,ag as xe,ah as ye,ai as Oe,aa as Se,a as O,b as $e,s as S,_ as Z,f as C,a7 as i,a9 as t,a8 as l,a5 as R,ab as U,ac as Ae,d as b,a4 as $}from"../chunks/4tRy_9DW.js";import{i as ee}from"../chunks/YaMAKQ02.js";import{e as Ee,u as d,b as Ne,i as Te}from"../chunks/C2I-YAI4.js";import{r as re,s as ae}from"../chunks/Zq5Smagp.js";import{i as ze}from"../chunks/C3qje7M7.js";import{a as Ce,s as z,b as qe}from"../chunks/GZJ2z3rj.js";import{g as te}from"../chunks/D-Lfi2MX.js";import{s as A,c as De}from"../chunks/Cg3IBsHc.js";function se(r,a,g=a){var m=new WeakSet;ge(r,"input",async e=>{var o=e?r.defaultValue:r.value;if(o=W(r)?B(o):o,g(o),y!==null&&m.add(y),await he(),o!==(o=a())){var v=r.selectionStart,p=r.selectionEnd;r.value=o??"",p!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(p,r.value.length))}}),(we&&r.defaultValue!==r.value||s(a)==null&&r.value)&&(g(W(r)?B(r.value):r.value),y!==null&&m.add(y)),ke(()=>{var e=a();if(r===document.activeElement){var o=Me??y;if(m.has(o))return}W(r)&&e===B(r.value)||r.type==="date"&&!e&&!r.value||e!==r.value&&(r.value=e??"")})}function W(r){var a=r.type;return a==="number"||a==="range"}function B(r){return r===""?null:+r}const je=_e([]),Fe="https://hebrews-coffee-website.onrender.com";async function He(r){try{const a=await fetch(Fe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw new Error("Failed to add order");const g=await a.json();je.update(m=>[...m,g])}catch(a){console.error("Error adding order:",a)}}var Ie=C("<option> </option>"),Le=C("<p>Please enter name, phone number and pickup time</p>"),Ve=C('<div class="confirm-window"><div class="confirm-details"><div><strong> </strong></div> <p><strong>Espresso:</strong> </p> <p><strong>Milk:</strong> </p> <p><strong>Flavor:</strong> </p></div> <div class="confirm-sidebar"><div class="customizer-select"><input id="name-input" type="text" required/> <span class="border-text">Enter Name:</span></div> <div class="customizer-select"><input id="phone-input" type="tel" required/> <span class="border-text">Enter Phone Number:</span></div> <div class="customizer-select"><select class="bg-none" required></select> <span class="drop-arrow"><img alt="Dropdown Arrow"/></span> <span class="border-text">Choose Pickup Time:</span></div> <!> <button class="bar-button">Place Order</button> <button class="bar-button">Edit Order</button></div></div>'),Je=C("<p>No order to confirm. Please go back and customize your drink.</p>");function rr(r,a){Pe(a,!1);const[g,m]=Ce(),e=()=>qe(A,"$storedOrder",g),o=Z();let v=Z(!1),p=["9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM"];function oe(){const c=new Date;for(const u in p){const h=new Date,[w,E]=u.split(" "),[q,k]=w.split(":").map(Number);let N=q%12;if(E==="PM"&&(N+=12),h.setHours(N,k,0,0),h>c)return u}return p[p.length-1]}function ne(){if(!b(o)){S(v,!0);return}He(e());const c="/place-order/"+e().drink+"/confirm/order-confirmation";De(),te(c)}function ie(){console.log(e().drink);const c="/place-order/"+e().drink.toLowerCase().replace(/ /g,"-");te(c)}be(()=>{z(A,s(e).time_slot=oe(),s(e))}),xe(()=>e(),()=>{S(o,e()&&(e().name??"").toString().trim().length>0&&(e().phone??"").toString().trim().length>0)}),ye(),ze();var G=Oe(),le=Se(G);{var ce=c=>{var u=Ve(),h=i(u),w=i(h),E=i(w),q=i(E);t(E),t(w);var k=l(w,2),N=l(i(k));t(k);var D=l(k,2),ve=l(i(D));t(D);var K=l(D,2),ue=l(i(K));t(K),t(h);var Q=l(h,2),j=i(Q),F=i(j);re(F),R(2),t(j);var H=l(j,2),I=i(H);re(I),R(2),t(H);var L=l(H,2),M=i(L);U(()=>{e(),Ae(()=>{b(v)})}),Ee(M,5,()=>p,Te,(n,f)=>{var _=Ie(),J=i(_,!0);t(_);var T={};U(()=>{P(J,b(f)),T!==(T=b(f))&&(_.value=(_.__value=b(f))??"")}),O(n,_)}),t(M);var X=l(M,2),me=i(X);ae(me,"src",`${base??""}/icons/simple_tailless_nav_arrow.svg`),t(X),R(2),t(L);var Y=l(L,2);{var pe=n=>{var f=Le();O(n,f)};ee(Y,n=>{b(v)&&n(pe)})}var V=l(Y,2),fe=l(V,2);t(Q),t(u),U((n,f,_,J,T)=>{P(q,`${n??""} ${f??""}`),P(N,` ${_??""}`),P(ve,` ${J??""}`),P(ue,` ${T??""}`),ae(V,"aria-disabled",!b(o))},[()=>($(d),e(),s(()=>d(e().temperature))),()=>($(d),e(),s(()=>d(e().drink))),()=>($(d),e(),s(()=>d(e().espresso))),()=>($(d),e(),s(()=>d(e().milk))),()=>($(d),e(),s(()=>d(e().flavor)))]),se(F,()=>e().name,n=>z(A,s(e).name=n,s(e))),x("input",F,()=>S(v,!1)),se(I,()=>e().phone,n=>z(A,s(e).phone=n,s(e))),x("input",I,()=>S(v,!1)),Ne(M,()=>e().time_slot,n=>z(A,s(e).time_slot=n,s(e))),x("input",M,()=>S(v,!1)),x("click",V,ne),x("click",fe,ie),O(c,u)},de=c=>{var u=Je();O(c,u)};ee(le,c=>{e()?c(ce):c(de,!1)})}O(r,G),$e(),m()}export{rr as component};
